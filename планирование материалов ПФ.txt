{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{9,
{
{"S","ТабПараметров"},
{"#",acf6192e-81ca-46ef-93a6-5a6968b78663,
{9,
{6,
{0,"ИД",
{"Pattern",
{"S"}
},"",0},
{1,"Название",
{"Pattern",
{"S"}
},"",0},
{2,"Значение",
{"Pattern"},"",0},
{3,"ОграничениеТипов",
{"Pattern"},"",0},
{4,"Используется",
{"Pattern",
{"B"}
},"",0},
{5,"Вычисляемый",
{"Pattern",
{"B"}
},"",0}
},
{2,6,0,0,1,1,2,2,3,3,4,4,5,5,
{1,18,
{2,99,6,
{"S","20180823134521"},
{"S","ВидыРасчета"},
{"#",4772b3b4-f4a3-49c0-a1a5-8cb5961511a3,
{6,1e512aab-1b41-4ef6-9375-f0137be9dd91,0,0,
{2,
{1e512aab-1b41-4ef6-9375-f0137be9dd91,
{"",0,
{"#",9b261ec4-bb7c-4588-b017-b4d0d967251d,10:a559c86000bfbb7811e5eae8a70184e8},
{4,0,
{0},"",-1,-1,0,0,""},0,0,""}
},
{1e512aab-1b41-4ef6-9375-f0137be9dd91,
{"",0,
{"#",9b261ec4-bb7c-4588-b017-b4d0d967251d,10:a559c86000bfbb7811e5eae8a7018687},
{4,0,
{0},"",-1,-1,0,0,""},1,0,""}
}
},
{"Pattern",
{"#",9b261ec4-bb7c-4588-b017-b4d0d967251d}
},0,1}
},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{4,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"#",9b261ec4-bb7c-4588-b017-b4d0d967251d}
}
}
},
{
{"S","СписокЗначений"},
{"B",1}
},
{
{"S","Текст"},
{"S",""}
},
{
{"S","ТекстМодуля"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,100,6,
{"S","20180823134521"},
{"S","ГоловнаяОрганизация"},
{"#",55adb97e-a84e-453e-8020-7665bb2abdef,271:8082005056c0000811e5f4a72942d595},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"#",55adb97e-a84e-453e-8020-7665bb2abdef}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,101,6,
{"S","20180823134521"},
{"S","КонПериода"},
{"D",20180830235959},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"D"}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,102,6,
{"S","20180823134521"},
{"S","НачПериода"},
{"D",20180801000000},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"D"}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,116,6,
{"S","20180905094316"},
{"S","КонПериода"},
{"D",20180831000000},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"D","D"}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,117,6,
{"S","20180905094316"},
{"S","НачПериода"},
{"D",20180801000000},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"D"}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,187,6,
{"S","20181129160804"},
{"S","Номенклатура"},
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06,253:b0b8e61f135b973f11e86a637280ed54},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",0},
{"B",0},0},
{2,188,6,
{"S","20181129162213"},
{"S","Номенклатура"},
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06,253:b272e61f135b973f11e7921f8084bb40},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,189,6,
{"S","20181129160804"},
{"S","Организация"},
{"#",55adb97e-a84e-453e-8020-7665bb2abdef,271:8082005056c0000811e5f4a72942d595},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"#",55adb97e-a84e-453e-8020-7665bb2abdef}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,190,6,
{"S","20181129160804"},
{"S","ДатаОстатков"},
{"D",00010101000000},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"D"}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,191,6,
{"S","20181130085948"},
{"S","Ссылка"},
{"#",c70e95e1-8e05-45c2-9c26-9f3660ebd8e9,796:b25ce61f135b973f11e8f3cdb3afd3b3},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"#",c70e95e1-8e05-45c2-9c26-9f3660ebd8e9}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,313,6,
{"S","20200316104758"},
{"S","ДатаНачалаПланирование"},
{"D",20200316000000},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"D"}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,314,6,
{"S","20200316104758"},
{"S","СкладНарва"},
{"#",e63fc7d1-3d01-4fbb-8cbe-9d4bf8fe2126,437:a93ce61f135b973f11e6e46adcf1049e},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"#",e63fc7d1-3d01-4fbb-8cbe-9d4bf8fe2126}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,315,6,
{"S","20200316104758"},
{"S","СкладСырьяИГП"},
{"#",e63fc7d1-3d01-4fbb-8cbe-9d4bf8fe2126,437:8082005056c0000811e5f71525f0207b},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"#",e63fc7d1-3d01-4fbb-8cbe-9d4bf8fe2126}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,316,6,
{"S","20200316104758"},
{"S","СхемаОбеспеченияПФ"},
{"#",8bc4ca02-cc49-4a2f-b8e1-c334730790a1,480:afa9e61f135b973f11e8479b9f1fa70c},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"#",8bc4ca02-cc49-4a2f-b8e1-c334730790a1}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,317,6,
{"S","20200316104758"},
{"S","СхемаОбеспеченияСырье"},
{"#",8bc4ca02-cc49-4a2f-b8e1-c334730790a1,480:afa9e61f135b973f11e8479bca71f18c},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"#",8bc4ca02-cc49-4a2f-b8e1-c334730790a1}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,318,6,
{"S","20200316104758"},
{"S","ТабПФ"},
{"#",acf6192e-81ca-46ef-93a6-5a6968b78663,
{9,
{5,
{2,"НомерНеделиВОтчете",
{"Pattern",
{"N"}
},"",0},
{3,"Спецификация",
{"Pattern",
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5}
},"",0},
{4,"ДатаЗапускаВыпуска",
{"Pattern",
{"N"}
},"",0},
{5,"КПроизводству",
{"Pattern",
{"N"}
},"",0},
{6,"Полуфабрикат",
{"Pattern",
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06}
},"",0}
},
{2,5,0,2,1,3,2,4,3,5,4,6,
{1,2,
{2,0,5,
{"N",1},
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5,410:00000000000000000000000000000000},
{"N",13},
{"N",20000},
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06,253:b272e61f135b973f11e7394d3fdce537},0},
{2,1,5,
{"N",2},
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5,410:00000000000000000000000000000000},
{"N",14},
{"N",20000},
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06,253:b272e61f135b973f11e7394d3fdce537},0}
},-1,1},
{0,0}
}
},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"S","ТаблицаЗначений"}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0},
{2,319,6,
{"S","20200316104758"},
{"S","ДатаОстатков"},
{"D",00010101000000},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{3,
{
{"S","ОписаниеТипа"},
{"#",f5c65050-3bbb-11d5-b988-0050bae0a95d,
{"Pattern",
{"D"}
}
}
},
{
{"S","СписокЗначений"},
{"B",0}
},
{
{"S","Текст"},
{"S",""}
}
}
},
{"B",1},
{"B",0},0}
},5,319},
{0,0}
}
}
},
{
{"S","ТаблицаПакетов"},
{"#",acf6192e-81ca-46ef-93a6-5a6968b78663,
{9,
{10,
{0,"ИмяПакета",
{"Pattern",
{"S"}
},"",0},
{1,"ИД",
{"Pattern",
{"S"}
},"",0},
{2,"Адрес",
{"Pattern",
{"S"}
},"",0},
{3,"Выгрузить",
{"Pattern",
{"B"}
},"",0},
{4,"Показать",
{"Pattern",
{"B"}
},"",0},
{5,"ЭтоВТ",
{"Pattern",
{"B"}
},"",0},
{6,"ТекстПакета",
{"Pattern",
{"S"}
},"",0},
{7,"ВремяВыполнения",
{"Pattern",
{"N"}
},"",0},
{8,"ТекстМодуля",
{"Pattern",
{"S"}
},"",0},
{9,"КоличествоСтрок",
{"Pattern",
{"N"}
},"",0}
},
{2,10,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,
{1,24,
{2,2281,10,
{"S","втСписокСотрудниковОрганизации"},
{"S","20180823134521"},
{"S",""},
{"B",0},
{"B",0},
{"B",1},
{"S","ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Сотрудники.Код КАК Код,
	Сотрудники.Ссылка КАК Сотрудник,
	Сотрудники.ФизическоеЛицо КАК ФизическоеЛицо,
	Сотрудники.ГоловнаяОрганизация КАК Организация,
	ДанныеДляПодбора.Подразделение КАК Подразделение,
	ДанныеДляПодбора.Должность КАК Должность,
	ДанныеДляПодбора.КоличествоСтавок КАК КоличествоСтавок,
	ВидыЗанятостиСотрудниковДляПодбора.ВидЗанятости КАК ВидЗанятости,
	ЕСТЬNULL(ДанныеДляПодбора.ВидДоговора, ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровССотрудниками.ПустаяСсылка)) КАК ВидДоговора,
	ТекущиеКадровыеДанные.ДатаПриема КАК ДатаПриема,
	ТекущиеКадровыеДанные.ДатаУвольнения КАК ДатаУвольнения,
	ТекущиеКадровыеДанные.ОформленПоТрудовомуДоговору КАК ОформленПоТрудовомуДоговору,
	СостоянияСотрудников.Состояние КАК Состояние,
	СостоянияСотрудников.ДействуетДо КАК СостояниеДействуетДо,
	ДанныеДляПодбора.ЭтоГоловнойСотрудник КАК ЭтоГоловнойСотрудник,
	ДанныеДляПодбора.Начало КАК Начало,
	ДанныеДляПодбора.Окончание КАК Окончание,
	ВЫБОР
		КОГДА ТекущиеКадровыеДанные.ДатаУвольнения <> ДАТАВРЕМЯ(1, 1, 1)
				И ТекущиеКадровыеДанные.ДатаУвольнения <= &НачПериода
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК Уволен,
	ВЫБОР
		КОГДА ДОБАВИТЬКДАТЕ(ТекущиеКадровыеДанные.ДатаПриема, МЕСЯЦ, ВЫРАЗИТЬ(ВидыЗанятостиСотрудниковДляПодбора.РегистраторСобытия КАК Документ.ПриемНаРаботу).ДлительностьИспытательногоСрока) > &НачПериода
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ИспытательныйСрок,
	ВЫБОР
		КОГДА ТекущиеКадровыеДанные.ДатаУвольнения <> ДАТАВРЕМЯ(1, 1, 1)
				И ТекущиеКадровыеДанные.ДатаУвольнения > &НачПериода
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК УволенВПериодеОтчета
ПОМЕСТИТЬ втСписокСотрудниковОрганизации
ИЗ
	РегистрСведений.ДанныеДляПодбораСотрудников КАК ДанныеДляПодбора
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.Сотрудники КАК Сотрудники
		ПО (ДанныеДляПодбора.Сотрудник = Сотрудники.Ссылка)
			И (ДанныеДляПодбора.Наименование = Сотрудники.Наименование)
			И (ДанныеДляПодбора.ИдентификаторЗаписи В
				(ВЫБРАТЬ ПЕРВЫЕ 1
					ДанныеДляПодбораСотрудниковОтбор.ИдентификаторЗаписи
				ИЗ
					РегистрСведений.ДанныеДляПодбораСотрудников КАК ДанныеДляПодбораСотрудниковОтбор
				ГДЕ
					ДанныеДляПодбораСотрудниковОтбор.Сотрудник = ДанныеДляПодбора.Сотрудник
					И ДанныеДляПодбораСотрудниковОтбор.Наименование = ДанныеДляПодбора.Наименование
					И ДанныеДляПодбораСотрудниковОтбор.Начало <= &КонПериода
					И (ДанныеДляПодбораСотрудниковОтбор.Окончание = ДАТАВРЕМЯ(1, 1, 1)
						ИЛИ ДанныеДляПодбораСотрудниковОтбор.Окончание >= &НачПериода)
				УПОРЯДОЧИТЬ ПО
					ДанныеДляПодбораСотрудниковОтбор.ПоДоговоруГПХ,
					ДанныеДляПодбораСотрудниковОтбор.Начало УБЫВ,
					ДанныеДляПодбораСотрудниковОтбор.Организация,
					ДанныеДляПодбораСотрудниковОтбор.Филиал,
					ДанныеДляПодбораСотрудниковОтбор.Подразделение))
		{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ТекущиеКадровыеДанныеСотрудников КАК ТекущиеКадровыеДанные
		ПО (ДанныеДляПодбора.ФизическоеЛицо = ТекущиеКадровыеДанные.ФизическоеЛицо)
			И (ДанныеДляПодбора.Сотрудник = ТекущиеКадровыеДанные.Сотрудник)
			И (ДанныеДляПодбора.Организация = ТекущиеКадровыеДанные.ГоловнаяОрганизация)}
		{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СостоянияСотрудников КАК СостоянияСотрудников
		ПО (ДанныеДляПодбора.Сотрудник = СостоянияСотрудников.Сотрудник)
			И (СостоянияСотрудников.Период <= &КонПериода)
			И (СостоянияСотрудников.ДействуетДо >= &КонПериода
				ИЛИ СостоянияСотрудников.ДействуетДо = ДАТАВРЕМЯ(1, 1, 1))}
		{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ВидыЗанятостиСотрудниковИнтервальный КАК ВидыЗанятостиСотрудниковДляПодбора
		ПО (ДанныеДляПодбора.Сотрудник = ВидыЗанятостиСотрудниковДляПодбора.Сотрудник)
			И (ВЫБОР
				КОГДА ДанныеДляПодбора.Окончание = ДАТАВРЕМЯ(1, 1, 1)
					ТОГДА ДАТАВРЕМЯ(3999, 12, 31, 23, 59, 59)
				ИНАЧЕ КОНЕЦПЕРИОДА(ДанныеДляПодбора.Окончание, ДЕНЬ)
			КОНЕЦ МЕЖДУ ВидыЗанятостиСотрудниковДляПодбора.ДатаНачала И ВидыЗанятостиСотрудниковДляПодбора.ДатаОкончания)}
ГДЕ
	ДанныеДляПодбора.КоличествоСтавок > 0"},
{"N",0.03},
{"S",""},
{"N",214},0},
{2,2282,10,
{"S","втДанные"},
{"S","20180823134521"},
{"S",""},
{"B",0},
{"B",0},
{"B",1},
{"S","ВЫБРАТЬ
	ВЫБОР
		КОГДА ВыработкаСотрудников.Автораспределение
			ТОГДА ВыработкаСотрудниковРаботники.Работник
		ИНАЧЕ ВыработкаСотрудниковВидыРабот.Работник
	КОНЕЦ КАК Сотрудник,
	СУММА(ВЫБОР
			КОГДА ВыработкаСотрудников.Автораспределение
				ТОГДА ВыработкаСотрудниковРаботники.Сумма * ВыработкаСотрудниковВидыРабот.Сумма / ВыработкаСотрудников.СуммаДокумента
			ИНАЧЕ ВыработкаСотрудниковВидыРабот.Сумма
		КОНЕЦ) КАК НормативнаяСтоимость
ПОМЕСТИТЬ втДанные
ИЗ
	Документ.ВыработкаСотрудников КАК ВыработкаСотрудников
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ВыработкаСотрудников.ВидыРабот КАК ВыработкаСотрудниковВидыРабот
		ПО ВыработкаСотрудников.Ссылка = ВыработкаСотрудниковВидыРабот.Ссылка
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.ВыработкаСотрудников.Работники КАК ВыработкаСотрудниковРаботники
		ПО (ВыработкаСотрудниковВидыРабот.Ссылка = ВыработкаСотрудниковРаботники.Ссылка)
ГДЕ
	ВыработкаСотрудников.Проведен
	И ВыработкаСотрудников.Дата МЕЖДУ &НачПериода И &КонПериода
	И ВыработкаСотрудников.ВидНаряда <> ЗНАЧЕНИЕ(Перечисление.ВидыБригадныхНарядов.Ремонт)

СГРУППИРОВАТЬ ПО
	ВЫБОР
		КОГДА ВыработкаСотрудников.Автораспределение
			ТОГДА ВыработкаСотрудниковРаботники.Работник
		ИНАЧЕ ВыработкаСотрудниковВидыРабот.Работник
	КОНЕЦ"},
{"N",0.022},
{"S",""},
{"N",95},0},
{2,2283,10,
{"S","КадровыеПеремещения"},
{"S","20180823134521"},
{"S",""},
{"B",0},
{"B",0},
{"B",1},
{"S","ВЫБРАТЬ
	КадроваяИсторияСотрудниковСрезПоследних.ФизическоеЛицо КАК ФизическоеЛицо,
	КадроваяИсторияСотрудниковСрезПоследних.Регистратор КАК Регистратор,
	ВЫРАЗИТЬ(КадроваяИсторияСотрудниковСрезПоследних.Регистратор КАК Документ.КадровыйПеревод).ДатаНачала КАК СрокИспытательный
ПОМЕСТИТЬ КадровыеПеремещения
ИЗ
	РегистрСведений.КадроваяИсторияСотрудников.СрезПоследних(&КонПериода, Регистратор ССЫЛКА Документ.КадровыйПеревод) КАК КадроваяИсторияСотрудниковСрезПоследних
ГДЕ
	КадроваяИсторияСотрудниковСрезПоследних.Регистратор.ДатаНачала >= &НачПериода"},
{"N",0.007},
{"S",""},
{"N",2},0},
{2,2284,10,
{"S","Результат1"},
{"S","20180823134521"},
{"S",""},
{"B",0},
{"B",1},
{"B",0},
{"S","ВЫБРАТЬ
	втСписокСотрудниковОрганизации.Код КАК СотрудникКод,
	втСписокСотрудниковОрганизации.Сотрудник КАК Сотрудник,
	ВложенныйЗапрос.Результат КАК Результат,
	втДанные.НормативнаяСтоимость КАК Выработка,
	втСписокСотрудниковОрганизации.ИспытательныйСрок КАК ИспытательныйСрок,
	втСписокСотрудниковОрганизации.Состояние КАК Состояние,
	втСписокСотрудниковОрганизации.ДатаПриема КАК ДатаПриема,
	ВЫБОР
		КОГДА ЕСТЬNULL(КадровыеПеремещения.Регистратор, 0) = 0
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК КадровыйПеревод,
	КадровыеПеремещения.Регистратор КАК ДокПеревода,
	втСписокСотрудниковОрганизации.Организация КАК Организация,
	втСписокСотрудниковОрганизации.Подразделение КАК Подразделение,
	втСписокСотрудниковОрганизации.Должность КАК Должность,
	втСписокСотрудниковОрганизации.ВидЗанятости КАК ВидЗанятости,
	втСписокСотрудниковОрганизации.Уволен КАК Уволен,
	втСписокСотрудниковОрганизации.УволенВПериодеОтчета КАК УволенВПериодеОтчета
ИЗ
	втСписокСотрудниковОрганизации КАК втСписокСотрудниковОрганизации
		ЛЕВОЕ СОЕДИНЕНИЕ втДанные КАК втДанные
		ПО втСписокСотрудниковОрганизации.ФизическоеЛицо = втДанные.Сотрудник
			И (втСписокСотрудниковОрганизации.ВидЗанятости <> ЗНАЧЕНИЕ(Перечисление.ВидыЗанятости.внутреннееСовместительство))
			И (НЕ втСписокСотрудниковОрганизации.Уволен)
		ЛЕВОЕ СОЕДИНЕНИЕ КадровыеПеремещения КАК КадровыеПеремещения
		ПО втСписокСотрудниковОрганизации.ФизическоеЛицо = КадровыеПеремещения.ФизическоеЛицо
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			Начисления.ФизическоеЛицо КАК ФизическоеЛицо,
			СУММА(Начисления.Результат) КАК Результат,
			МАКСИМУМ(КадроваяИсторияСотрудниковСрезПоследних.Регистратор) КАК Регистратор
		ИЗ
			РегистрРасчета.Начисления КАК Начисления
				ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.КадроваяИсторияСотрудников.СрезПоследних(, ГоловнаяОрганизация = &ГоловнаяОрганизация) КАК КадроваяИсторияСотрудниковСрезПоследних
				ПО Начисления.Сотрудник = КадроваяИсторияСотрудниковСрезПоследних.Сотрудник
		ГДЕ
			Начисления.ГоловнаяОрганизация = &ГоловнаяОрганизация
			И Начисления.ПериодРегистрации = &НачПериода
			И Начисления.ВидРасчета В(&ВидыРасчета)
			И (КадроваяИсторияСотрудниковСрезПоследних.Регистратор.ВидЗанятости <> ЗНАЧЕНИЕ(Перечисление.ВидыЗанятости.внутреннееСовместительство)
					ИЛИ КадроваяИсторияСотрудниковСрезПоследних.Регистратор ССЫЛКА Документ.Увольнение)
		
		СГРУППИРОВАТЬ ПО
			Начисления.ФизическоеЛицо) КАК ВложенныйЗапрос
		ПО втСписокСотрудниковОрганизации.ФизическоеЛицо = ВложенныйЗапрос.ФизическоеЛицо
ГДЕ
	втДанные.НормативнаяСтоимость > 0"},
{"N",0.193},
{"S",""},
{"N",95},0},
{2,2287,10,
{"S","втСписокСотрудниковОрганизации"},
{"S","20180905094316"},
{"S",""},
{"B",0},
{"B",1},
{"B",1},
{"S","ВЫБРАТЬ
	Сотрудники.Код КАК Код,
	Сотрудники.Ссылка КАК Сотрудник,
	Сотрудники.ФизическоеЛицо КАК ФизическоеЛицо,
	Сотрудники.ГоловнаяОрганизация КАК Организация,
	ДанныеДляПодбора.Подразделение КАК Подразделение,
	ВЫРАЗИТЬ(ДанныеДляПодбора.Должность КАК Справочник.Должности).Ссылка КАК Должность,
	ДанныеДляПодбора.КоличествоСтавок КАК КоличествоСтавок,
	ВидыЗанятостиСотрудниковДляПодбора.ВидЗанятости КАК ВидЗанятости,
	ЕСТЬNULL(ДанныеДляПодбора.ВидДоговора, ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровССотрудниками.ПустаяСсылка)) КАК ВидДоговора,
	ТекущиеКадровыеДанные.ДатаПриема КАК ДатаПриема,
	ТекущиеКадровыеДанные.ДатаУвольнения КАК ДатаУвольнения,
	ТекущиеКадровыеДанные.ОформленПоТрудовомуДоговору КАК ОформленПоТрудовомуДоговору,
	СостоянияСотрудников.Состояние КАК Состояние,
	СостоянияСотрудников.ДействуетДо КАК СостояниеДействуетДо,
	ДанныеДляПодбора.ЭтоГоловнойСотрудник КАК ЭтоГоловнойСотрудник,
	ДанныеДляПодбора.Начало КАК Начало,
	ДанныеДляПодбора.Окончание КАК Окончание,
	ВЫБОР
		КОГДА ТекущиеКадровыеДанные.ДатаУвольнения <> ДАТАВРЕМЯ(1, 1, 1)
				И ТекущиеКадровыеДанные.ДатаУвольнения <= &НачПериода
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК Уволен,
	ВЫБОР
		КОГДА ДОБАВИТЬКДАТЕ(ТекущиеКадровыеДанные.ДатаПриема, МЕСЯЦ, ВЫРАЗИТЬ(ВидыЗанятостиСотрудниковДляПодбора.РегистраторСобытия КАК Документ.ПриемНаРаботу).ДлительностьИспытательногоСрока) > &НачПериода
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ИспытательныйСрок,
	ВЫБОР
		КОГДА ТекущиеКадровыеДанные.ДатаУвольнения <> ДАТАВРЕМЯ(1, 1, 1)
				И ТекущиеКадровыеДанные.ДатаУвольнения > &НачПериода
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК УволенВПериодеОтчета,
	ДанныеДляПодбора.ДолжностьПоШтатномуРасписанию КАК ДолжностьПоШтатномуРасписанию
ПОМЕСТИТЬ втСписокСотрудниковОрганизации
ИЗ
	РегистрСведений.ДанныеДляПодбораСотрудников КАК ДанныеДляПодбора
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.Сотрудники КАК Сотрудники
		ПО ДанныеДляПодбора.Сотрудник = Сотрудники.Ссылка
			И ДанныеДляПодбора.Наименование = Сотрудники.Наименование
			И (ДанныеДляПодбора.ИдентификаторЗаписи В
				(ВЫБРАТЬ ПЕРВЫЕ 1
					ДанныеДляПодбораСотрудниковОтбор.ИдентификаторЗаписи
				ИЗ
					РегистрСведений.ДанныеДляПодбораСотрудников КАК ДанныеДляПодбораСотрудниковОтбор
				ГДЕ
					ДанныеДляПодбораСотрудниковОтбор.Сотрудник = ДанныеДляПодбора.Сотрудник
					И ДанныеДляПодбораСотрудниковОтбор.Наименование = ДанныеДляПодбора.Наименование
					И ДанныеДляПодбораСотрудниковОтбор.Начало <= &КонПериода
					И (ДанныеДляПодбораСотрудниковОтбор.Окончание = ДАТАВРЕМЯ(1, 1, 1)
						ИЛИ ДанныеДляПодбораСотрудниковОтбор.Окончание >= &НачПериода)
				УПОРЯДОЧИТЬ ПО
					ДанныеДляПодбораСотрудниковОтбор.ПоДоговоруГПХ,
					ДанныеДляПодбораСотрудниковОтбор.Начало УБЫВ,
					ДанныеДляПодбораСотрудниковОтбор.Организация,
					ДанныеДляПодбораСотрудниковОтбор.Филиал,
					ДанныеДляПодбораСотрудниковОтбор.Подразделение))
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ТекущиеКадровыеДанныеСотрудников КАК ТекущиеКадровыеДанные
		ПО ДанныеДляПодбора.ФизическоеЛицо = ТекущиеКадровыеДанные.ФизическоеЛицо
			И ДанныеДляПодбора.Сотрудник = ТекущиеКадровыеДанные.Сотрудник
			И ДанныеДляПодбора.Организация = ТекущиеКадровыеДанные.ГоловнаяОрганизация
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СостоянияСотрудников КАК СостоянияСотрудников
		ПО ДанныеДляПодбора.Сотрудник = СостоянияСотрудников.Сотрудник
			И (СостоянияСотрудников.Период <= &КонПериода)
			И (СостоянияСотрудников.ДействуетДо >= &КонПериода
				ИЛИ СостоянияСотрудников.ДействуетДо = ДАТАВРЕМЯ(1, 1, 1))
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ВидыЗанятостиСотрудниковИнтервальный КАК ВидыЗанятостиСотрудниковДляПодбора
		ПО ДанныеДляПодбора.Сотрудник = ВидыЗанятостиСотрудниковДляПодбора.Сотрудник
			И (ВЫБОР
				КОГДА ДанныеДляПодбора.Окончание = ДАТАВРЕМЯ(1, 1, 1)
					ТОГДА ДАТАВРЕМЯ(3999, 12, 31, 23, 59, 59)
				ИНАЧЕ КОНЕЦПЕРИОДА(ДанныеДляПодбора.Окончание, ДЕНЬ)
			КОНЕЦ МЕЖДУ ВидыЗанятостиСотрудниковДляПодбора.ДатаНачала И ВидыЗанятостиСотрудниковДляПодбора.ДатаОкончания)
ГДЕ
	ДанныеДляПодбора.КоличествоСтавок > 0"},
{"N",0.035},
{"S",""},
{"N",214},0},
{2,2921,10,
{"S","Результат1"},
{"S","20181129162213"},
{"S",""},
{"B",0},
{"B",1},
{"B",0},
{"S","ВЫБРАТЬ
	СебестоимостьТоваровОбороты.АналитикаУчетаНоменклатуры.Номенклатура КАК АналитикаУчетаНоменклатурыНоменклатура,
	СебестоимостьТоваровОбороты.РазделУчета КАК РазделУчета,
	СебестоимостьТоваровОбороты.КоличествоПриход КАК КоличествоПриход,
	СебестоимостьТоваровОбороты.КоличествоРасход КАК КоличествоРасход,
	СебестоимостьТоваровОбороты.СтоимостьРеглПриход КАК СтоимостьРеглПриход,
	СебестоимостьТоваровОбороты.СтоимостьРеглРасход КАК СтоимостьРеглРасход,
	СебестоимостьТоваровОбороты.Регистратор КАК Регистратор
ИЗ
	РегистрНакопления.СебестоимостьТоваров.Обороты(, , Регистратор, ) КАК СебестоимостьТоваровОбороты
ГДЕ
	СебестоимостьТоваровОбороты.АналитикаУчетаНоменклатуры.Номенклатура = &Номенклатура"},
{"N",0.53},
{"S",""},
{"N",459},0},
{2,2939,10,
{"S","Результат1"},
{"S","20181129160804"},
{"S",""},
{"B",0},
{"B",1},
{"B",0},
{"S","ВЫБРАТЬ
	СебестоимостьТоваровОстатки.Организация КАК Организация,
	СебестоимостьТоваровОстатки.АналитикаУчетаНоменклатуры.Номенклатура КАК Номенклатура,
	СебестоимостьТоваровОстатки.АналитикаУчетаНоменклатуры.Склад КАК Склад,
	ВЫБОР
		КОГДА СебестоимостьТоваровОстатки.КоличествоОстаток <> 0
			ТОГДА СебестоимостьТоваровОстатки.СтоимостьРеглОстаток / СебестоимостьТоваровОстатки.КоличествоОстаток
		ИНАЧЕ 0
	КОНЕЦ КАК СтоимостьЕд,
	СебестоимостьТоваровОстатки.КоличествоОстаток КАК КоличествоОстаток,
	СебестоимостьТоваровОстатки.СтоимостьРеглОстаток КАК СтоимостьРеглОстаток
ИЗ
	РегистрНакопления.СебестоимостьТоваров.Остатки(&ДатаОстатков, Организация = &Организация) КАК СебестоимостьТоваровОстатки
ИТОГИ
	СРЕДНЕЕ(СтоимостьЕд),
	СУММА(КоличествоОстаток),
	СУММА(СтоимостьРеглОстаток)
ПО
	Номенклатура"},
{"N",0.078},
{"S",""},
{"N",2777},0},
{2,2941,10,
{"S","Результат1"},
{"S","20181130085948"},
{"S",""},
{"B",0},
{"B",1},
{"B",0},
{"S","ВЫБРАТЬ
	ПередачаТоваровМеждуОрганизациямиТовары.Ссылка КАК Ссылка,
	ПередачаТоваровМеждуОрганизациямиТовары.НомерСтроки КАК НомерСтроки,
	ПередачаТоваровМеждуОрганизациямиТовары.Номенклатура КАК Номенклатура,
	ПередачаТоваровМеждуОрганизациямиТовары.Характеристика КАК Характеристика,
	ПередачаТоваровМеждуОрганизациямиТовары.Упаковка КАК Упаковка,
	ПередачаТоваровМеждуОрганизациямиТовары.КоличествоУпаковок КАК КоличествоУпаковок,
	ПередачаТоваровМеждуОрганизациямиТовары.Количество КАК Количество,
	ПередачаТоваровМеждуОрганизациямиТовары.ВидЦены КАК ВидЦены,
	ПередачаТоваровМеждуОрганизациямиТовары.Цена КАК Цена,
	ПередачаТоваровМеждуОрганизациямиТовары.СтавкаНДС КАК СтавкаНДС,
	ПередачаТоваровМеждуОрганизациямиТовары.СуммаНДС КАК СуммаНДС,
	ПередачаТоваровМеждуОрганизациямиТовары.Сумма КАК Сумма,
	ПередачаТоваровМеждуОрганизациямиТовары.СуммаСНДС КАК СуммаСНДС,
	ПередачаТоваровМеждуОрганизациямиТовары.НомерГТД КАК НомерГТД,
	ПередачаТоваровМеждуОрганизациямиТовары.ВидЗапасов КАК ВидЗапасов,
	ПередачаТоваровМеждуОрганизациямиТовары.СтатьяРасходов КАК СтатьяРасходов,
	ПередачаТоваровМеждуОрганизациямиТовары.АналитикаРасходов КАК АналитикаРасходов,
	ПередачаТоваровМеждуОрганизациямиТовары.ИдентификаторСтроки КАК ИдентификаторСтроки,
	ПередачаТоваровМеждуОрганизациямиТовары.СуммаВзаиморасчетов КАК СуммаВзаиморасчетов,
	ПередачаТоваровМеждуОрганизациямиТовары.СуммаНДСВзаиморасчетов КАК СуммаНДСВзаиморасчетов,
	ПередачаТоваровМеждуОрганизациямиТовары.УдалитьАналитикаУчетаПартий КАК УдалитьАналитикаУчетаПартий,
	ПередачаТоваровМеждуОрганизациямиТовары.Серия КАК Серия,
	ПередачаТоваровМеждуОрганизациямиТовары.СтатусУказанияСерий КАК СтатусУказанияСерий,
	ПередачаТоваровМеждуОрганизациямиТовары.АналитикаУчетаНоменклатуры КАК АналитикаУчетаНоменклатуры,
	ПередачаТоваровМеждуОрганизациямиТовары.Подразделение КАК Подразделение,
	ПередачаТоваровМеждуОрганизациямиТовары.СписатьНаРасходы КАК СписатьНаРасходы,
	ПередачаТоваровМеждуОрганизациямиТовары.Назначение КАК Назначение,
	ПередачаТоваровМеждуОрганизациямиТовары.ПоТоварамКОформлению КАК ПоТоварамКОформлению
ИЗ
	Документ.ПередачаТоваровМеждуОрганизациями.Товары КАК ПередачаТоваровМеждуОрганизациямиТовары
ГДЕ
	ПередачаТоваровМеждуОрганизациямиТовары.Ссылка = &Ссылка"},
{"N",0.015},
{"S",""},
{"N",301},0},
{2,6009,10,
{"S","втОстатки"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",0},
{"B",1},
{"S","ВЫБРАТЬ
	ТоварыНаСкладахОстатки.Номенклатура КАК Номенклатура,
	СУММА(ТоварыНаСкладахОстатки.ВНаличииОстаток) КАК НачальныйОстаток
ПОМЕСТИТЬ втОстатки
ИЗ
	РегистрНакопления.ТоварыНаСкладах.Остатки(&ДатаОстатков, Склад В (&СкладНарва, &СкладСырьяИГП)) КАК ТоварыНаСкладахОстатки

СГРУППИРОВАТЬ ПО
	ТоварыНаСкладахОстатки.Номенклатура"},
{"N",0.004},
{"S",""},
{"N",767},0},
{2,6010,10,
{"S","втИзделияПФ"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",0},
{"B",1},
{"S","ВЫБРАТЬ
	ТабПФ.Полуфабрикат КАК Номенклатура,
	ТабПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	ТабПФ.Спецификация КАК Спецификация,
	ТабПФ.КПроизводству КАК КоличествоОборот,
	ТабПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска
ПОМЕСТИТЬ втИзделияПФ
ИЗ
	&ТабПФ КАК ТабПФ"},
{"N",0.003},
{"S",""},
{"N",2},0},
{2,6011,10,
{"S","втЗаказыПФПоставщикам"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",0},
{"B",1},
{"S","ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЗаказыПоставщикамОстатки.Номенклатура КАК Номенклатура,
	СУММА(ВЫБОР
			КОГДА ЗаказыПоставщикамОстатки.ЗаказПоставщику.ДатаПоступления < &ДатаНачалаПланирование
				ТОГДА 0
			ИНАЧЕ ЗаказыПоставщикамОстатки.ЗаказаноОстаток
		КОНЕЦ) КАК ЗаказаноОстаток,
	СУММА(ВЫБОР
			КОГДА ЗаказыПоставщикамОстатки.ЗаказПоставщику.ДатаПоступления < &ДатаНачалаПланирование
				ТОГДА ЗаказыПоставщикамОстатки.ЗаказаноОстаток
			ИНАЧЕ 0
		КОНЕЦ) КАК ЗаказаноОстатокПросрочка,
	НЕДЕЛЯ(ЗаказыПоставщикамОстатки.ЗаказПоставщику.ДатаПоступления) КАК НеделяПланируемогоПоступления
ПОМЕСТИТЬ втЗаказыПФПоставщикам
ИЗ
	РегистрНакопления.ЗаказыПоставщикам.Остатки(, Склад В (&СкладНарва, &СкладСырьяИГП)) КАК ЗаказыПоставщикамОстатки
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.ЗаказПоставщику.Товары КАК ЗаказПоставщикуТовары
		ПО ЗаказыПоставщикамОстатки.ЗаказПоставщику = ЗаказПоставщикуТовары.Ссылка
			И ЗаказыПоставщикамОстатки.КодСтроки = ЗаказПоставщикуТовары.КодСтроки

СГРУППИРОВАТЬ ПО
	ЗаказыПоставщикамОстатки.Номенклатура,
	НЕДЕЛЯ(ЗаказыПоставщикамОстатки.ЗаказПоставщику.ДатаПоступления)"},
{"N",0.007},
{"S",""},
{"N",293},0},
{2,6012,10,
{"S","втПолуфабрикаты"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",0},
{"B",1},
{"S","ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Полуфабрикат,
	ОсновныеСпецификации.Спецификация КАК Спецификация,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	СУММА(ВЫБОР
			КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
				ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
			ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		КОНЕЦ) КАК Потребность,
	ЕСТЬNULL(втОстатки.НачальныйОстаток, 0) КАК НачальныйОстаток,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете
ПОМЕСТИТЬ втПолуфабрикаты
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
				ЛЕВОЕ СОЕДИНЕНИЕ втОстатки КАК втОстатки
				ПО (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = втОстатки.Номенклатура)
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
				ПО (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = ОсновныеСпецификации.Номенклатура)
			ПО (РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка)
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияПФ)
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификацииГП
			ПО (РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификацииГП.Спецификация)
		ПО (втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура)
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0

СГРУППИРОВАТЬ ПО
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура,
	втИзделияПФ.ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете,
	ЕСТЬNULL(втОстатки.НачальныйОстаток, 0),
	ОсновныеСпецификации.Спецификация"},
{"N",0.048},
{"S",""},
{"N",2},0},
{2,6013,10,
{"S","втПолуфабрикатыТЕСТ"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",1},
{"B",1},
{"S","ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Полуфабрикат,
	ОсновныеСпецификации.Спецификация КАК Спецификация,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	ВЫБОР
		КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
			ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
	КОНЕЦ КАК Потребность,
	ЕСТЬNULL(втОстатки.НачальныйОстаток, 0) КАК НачальныйОстаток,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	РесурсныеСпецификацииМатериалыИУслуги.Ссылка КАК Ссылка
ПОМЕСТИТЬ втПолуфабрикатыТЕСТ
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
				ЛЕВОЕ СОЕДИНЕНИЕ втОстатки КАК втОстатки
				ПО РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = втОстатки.Номенклатура
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
				ПО РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = ОсновныеСпецификации.Номенклатура
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияПФ)
			полное
			 СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификацииГП
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификацииГП.Спецификация
		ПО втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0"},
{"N",0.066},
{"S",""},
{"N",4},0},
{2,6014,10,
{"S","втПолуфабриатыНарастающийИтог"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",0},
{"B",1},
{"S","ВЫБРАТЬ
	втПолуфабрикаты.Полуфабрикат КАК Полуфабрикат,
	втПолуфабрикаты.Спецификация КАК Спецификация,
	втПолуфабрикаты.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втПолуфабрикаты.НачальныйОстаток КАК НачальныйОстаток,
	втПолуфабрикаты.Потребность КАК Потребность,
	СУММА(втПолуфабрикатыНарастающийИтог.Потребность) КАК ПотребностьНарастающийИтог,
	1 + втПолуфабрикаты.НомерНеделиВОтчете КАК НомерНеделиВОтчетеСмещение,
	втПолуфабрикаты.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	ЕСТЬNULL(втЗаказыПФПоставщикам.ЗаказаноОстаток, 0) КАК ЗаказаноПоставщику
ПОМЕСТИТЬ втПолуфабриатыНарастающийИтог
ИЗ
	втПолуфабрикаты КАК втПолуфабрикаты
		ЛЕВОЕ СОЕДИНЕНИЕ втПолуфабрикаты КАК втПолуфабрикатыНарастающийИтог
		ПО втПолуфабрикаты.НомерНеделиВОтчете >= втПолуфабрикатыНарастающийИтог.НомерНеделиВОтчете
			И втПолуфабрикаты.Полуфабрикат = втПолуфабрикатыНарастающийИтог.Полуфабрикат
		ЛЕВОЕ СОЕДИНЕНИЕ втЗаказыПФПоставщикам КАК втЗаказыПФПоставщикам
		ПО втПолуфабрикаты.Полуфабрикат = втЗаказыПФПоставщикам.Номенклатура
			И втПолуфабрикаты.ДатаЗапускаВыпуска = втЗаказыПФПоставщикам.НеделяПланируемогоПоступления

СГРУППИРОВАТЬ ПО
	втПолуфабрикаты.ДатаЗапускаВыпуска,
	втПолуфабрикаты.Потребность,
	втПолуфабрикаты.НомерНеделиВОтчете,
	1 + втПолуфабрикаты.НомерНеделиВОтчете,
	ЕСТЬNULL(втЗаказыПФПоставщикам.ЗаказаноОстаток, 0),
	втПолуфабрикаты.Полуфабрикат,
	втПолуфабрикаты.Спецификация,
	втПолуфабрикаты.НачальныйОстаток

ДЛЯ ИЗМЕНЕНИЯ"},
{"N",0.008},
{"S",""},
{"N",2},0},
{2,6015,10,
{"S","втПолуфабриатыНарастающийИтогЗаказыПост"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",0},
{"B",1},
{"S","ВЫБРАТЬ
	втПолуфабриатыНарастающийИтог.Полуфабрикат КАК Полуфабрикат,
	втПолуфабриатыНарастающийИтог.Спецификация КАК Спецификация,
	втПолуфабриатыНарастающийИтог.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втПолуфабриатыНарастающийИтог.НачальныйОстаток КАК НачальныйОстаток,
	втПолуфабриатыНарастающийИтог.Потребность КАК Потребность,
	втПолуфабриатыНарастающийИтог.ПотребностьНарастающийИтог КАК ПотребностьНарастающийИтог,
	втПолуфабриатыНарастающийИтог.НомерНеделиВОтчетеСмещение КАК НомерНеделиВОтчетеСмещение,
	втПолуфабриатыНарастающийИтог.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	втПолуфабриатыНарастающийИтог.ЗаказаноПоставщику КАК ЗаказаноПоставщику,
	СУММА(втПолуфабриатыНарастающийИтогСмещение.ЗаказаноПоставщику) КАК ЗаказаноПоставщикуНарастающийИтог
ПОМЕСТИТЬ втПолуфабриатыНарастающийИтогЗаказыПост
ИЗ
	втПолуфабриатыНарастающийИтог КАК втПолуфабриатыНарастающийИтог
		ЛЕВОЕ СОЕДИНЕНИЕ втПолуфабриатыНарастающийИтог КАК втПолуфабриатыНарастающийИтогСмещение
		ПО втПолуфабриатыНарастающийИтог.Полуфабрикат = втПолуфабриатыНарастающийИтогСмещение.Полуфабрикат
			И втПолуфабриатыНарастающийИтог.НомерНеделиВОтчете >= втПолуфабриатыНарастающийИтогСмещение.НомерНеделиВОтчете

СГРУППИРОВАТЬ ПО
	втПолуфабриатыНарастающийИтог.Полуфабрикат,
	втПолуфабриатыНарастающийИтог.Спецификация,
	втПолуфабриатыНарастающийИтог.ДатаЗапускаВыпуска,
	втПолуфабриатыНарастающийИтог.НачальныйОстаток,
	втПолуфабриатыНарастающийИтог.Потребность,
	втПолуфабриатыНарастающийИтог.ПотребностьНарастающийИтог,
	втПолуфабриатыНарастающийИтог.НомерНеделиВОтчетеСмещение,
	втПолуфабриатыНарастающийИтог.НомерНеделиВОтчете,
	втПолуфабриатыНарастающийИтог.ЗаказаноПоставщику"},
{"N",0.002},
{"S",""},
{"N",2},0},
{2,6016,10,
{"S","втПолуфабрикатыРезультат"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",0},
{"B",1},
{"S","ВЫБРАТЬ
	втПолуфабриатыНарастающийИтогЗаказыПост.Полуфабрикат КАК Полуфабрикат,
	втПолуфабриатыНарастающийИтогЗаказыПост.Спецификация КАК Спецификация,
	втПолуфабриатыНарастающийИтогЗаказыПост.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	ЕСТЬNULL(ВЫБОР
			КОГДА втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПостСмещение.ПотребностьНарастающийИтог < 0
				ТОГДА втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток
			ИНАЧЕ втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПостСмещение.ПотребностьНарастающийИтог
		КОНЕЦ, втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток) КАК НачальныйОстаток,
	втПолуфабриатыНарастающийИтогЗаказыПост.Потребность КАК Потребность,
	втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог КАК ПотребностьНарастающийИтог,
	ВЫБОР
		КОГДА втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог < 0
			ТОГДА 0
		ИНАЧЕ втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог
	КОНЕЦ КАК РасчетныйОстатокНаКонецПериода,
	ВЫБОР
		КОГДА втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток >= втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог
			ТОГДА 0
		ИНАЧЕ ВЫБОР
				КОГДА ЕСТЬNULL(ВЫБОР
							КОГДА втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПостСмещение.ПотребностьНарастающийИтог < 0
								ТОГДА 0
							ИНАЧЕ втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПостСмещение.ПотребностьНарастающийИтог
						КОНЕЦ, втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток) > 0
					ТОГДА втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог - втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток
				ИНАЧЕ втПолуфабриатыНарастающийИтогЗаказыПост.Потребность
			КОНЕЦ
	КОНЕЦ КАК КПроизводству,
	втПолуфабриатыНарастающийИтогЗаказыПост.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	втПолуфабриатыНарастающийИтогЗаказыПост.ЗаказаноПоставщику КАК ЗаказаноПоставщику,
	втПолуфабриатыНарастающийИтогЗаказыПост.ЗаказаноПоставщикуНарастающийИтог КАК ЗаказаноПоставщикуНарастающийИтог
ПОМЕСТИТЬ втПолуфабрикатыРезультат
ИЗ
	втПолуфабриатыНарастающийИтогЗаказыПост КАК втПолуфабриатыНарастающийИтогЗаказыПост
		ЛЕВОЕ СОЕДИНЕНИЕ втПолуфабриатыНарастающийИтогЗаказыПост КАК втПолуфабриатыНарастающийИтогЗаказыПостСмещение
		ПО втПолуфабриатыНарастающийИтогЗаказыПост.Полуфабрикат = втПолуфабриатыНарастающийИтогЗаказыПостСмещение.Полуфабрикат
			И (втПолуфабриатыНарастающийИтогЗаказыПост.НомерНеделиВОтчете = втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НомерНеделиВОтчете + 1)"},
{"N",0.002},
{"S",""},
{"N",2},0},
{2,6017,10,
{"S","Результат1"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",1},
{"B",0},
{"S","ВЫБРАТЬ
	втПолуфабрикатыРезультат.Полуфабрикат КАК Полуфабрикат,
	втПолуфабрикатыРезультат.Спецификация КАК Спецификация,
	втПолуфабрикатыРезультат.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втПолуфабрикатыРезультат.НачальныйОстаток КАК НачальныйОстаток,
	втПолуфабрикатыРезультат.Потребность КАК Потребность,
	ВЫБОР
		КОГДА втПолуфабрикатыРезультат.ПотребностьНарастающийИтог - ЕСТЬNULL(втПолуфабрикатыРезультат.ЗаказаноПоставщикуНарастающийИтог, 0) > 0
			ТОГДА втПолуфабрикатыРезультат.ПотребностьНарастающийИтог - ЕСТЬNULL(втПолуфабрикатыРезультат.ЗаказаноПоставщикуНарастающийИтог, 0)
		ИНАЧЕ 0
	КОНЕЦ КАК ПотребностьНарастающийИтог,
	втПолуфабрикатыРезультат.РасчетныйОстатокНаКонецПериода КАК РасчетныйОстатокНаКонецПериода,
	втПолуфабрикатыРезультат.КПроизводству КАК КПроизводству,
	втПолуфабрикатыРезультат.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	втПолуфабрикатыРезультат.ЗаказаноПоставщику КАК ЗаказаноПоставщику
ИЗ
	втПолуфабрикатыРезультат КАК втПолуфабрикатыРезультат"},
{"N",0.001},
{"S",""},
{"N",2},0},
{2,6018,10,
{"S","Результат2"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",1},
{"B",0},
{"S","ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Сырье,
	NULL КАК Спецификация,
	СУММА(ВЫБОР
			КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
				ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
			ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		КОНЕЦ) КАК Потребность,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияСырье)
			ПОЛНОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификации.Спецификация
		ПО втИзделияПФ.Спецификация = РесурсныеСпецификацииВыходныеИзделия.Ссылка
			И втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0

СГРУППИРОВАТЬ ПО
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура,
	втИзделияПФ.ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете"},
{"N",0.003},
{"S",""},
{"N",0},0},
{2,6019,10,
{"S","Результат3"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",1},
{"B",0},
{"S","УНИЧТОЖИТЬ втЗаказыПФПоставщикам"},
{"N",0.001},
{"S",""},
{"N",0},0},
{2,6020,10,
{"S","Результат4"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",1},
{"B",0},
{"S","УНИЧТОЖИТЬ втИзделияПФ"},
{"N",0},
{"S",""},
{"N",0},0},
{2,6021,10,
{"S","Результат5"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",1},
{"B",0},
{"S","УНИЧТОЖИТЬ втПолуфабриатыНарастающийИтог"},
{"N",0},
{"S",""},
{"N",0},0},
{2,6022,10,
{"S","Результат6"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",1},
{"B",0},
{"S","УНИЧТОЖИТЬ втПолуфабриатыНарастающийИтогЗаказыПост"},
{"N",0.001},
{"S",""},
{"N",0},0},
{2,6023,10,
{"S","Результат7"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",1},
{"B",0},
{"S","УНИЧТОЖИТЬ втПолуфабрикатыРезультат"},
{"N",0},
{"S",""},
{"N",0},0},
{2,6024,10,
{"S","Результат8"},
{"S","20200316104758"},
{"S",""},
{"B",0},
{"B",1},
{"B",0},
{"S","УНИЧТОЖИТЬ втПолуфабрикаты"},
{"N",0},
{"S",""},
{"N",0},0}
},9,6024},
{0,0}
}
}
},
{
{"S","ОписаниеТекущейВеткиДЗ"},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{2,
{
{"S","Текст"},
{"S","ВЫБРАТЬ
	ТоварыНаСкладахОстатки.Номенклатура КАК Номенклатура,
	СУММА(ТоварыНаСкладахОстатки.ВНаличииОстаток) КАК НачальныйОстаток
ПОМЕСТИТЬ втОстатки
ИЗ
	РегистрНакопления.ТоварыНаСкладах.Остатки(&ДатаОстатков, Склад В (&СкладНарва, &СкладСырьяИГП)) КАК ТоварыНаСкладахОстатки

СГРУППИРОВАТЬ ПО
	ТоварыНаСкладахОстатки.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТабПФ.Полуфабрикат КАК Номенклатура,
	ТабПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	ТабПФ.Спецификация КАК Спецификация,
	ТабПФ.КПроизводству КАК КоличествоОборот,
	ТабПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска
ПОМЕСТИТЬ втИзделияПФ
ИЗ
	&ТабПФ КАК ТабПФ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЗаказыПоставщикамОстатки.Номенклатура КАК Номенклатура,
	СУММА(ВЫБОР
			КОГДА ЗаказыПоставщикамОстатки.ЗаказПоставщику.ДатаПоступления < &ДатаНачалаПланирование
				ТОГДА 0
			ИНАЧЕ ЗаказыПоставщикамОстатки.ЗаказаноОстаток
		КОНЕЦ) КАК ЗаказаноОстаток,
	СУММА(ВЫБОР
			КОГДА ЗаказыПоставщикамОстатки.ЗаказПоставщику.ДатаПоступления < &ДатаНачалаПланирование
				ТОГДА ЗаказыПоставщикамОстатки.ЗаказаноОстаток
			ИНАЧЕ 0
		КОНЕЦ) КАК ЗаказаноОстатокПросрочка,
	НЕДЕЛЯ(ЗаказыПоставщикамОстатки.ЗаказПоставщику.ДатаПоступления) КАК НеделяПланируемогоПоступления
ПОМЕСТИТЬ втЗаказыПФПоставщикам
ИЗ
	РегистрНакопления.ЗаказыПоставщикам.Остатки(, Склад В (&СкладНарва, &СкладСырьяИГП)) КАК ЗаказыПоставщикамОстатки
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.ЗаказПоставщику.Товары КАК ЗаказПоставщикуТовары
		ПО ЗаказыПоставщикамОстатки.ЗаказПоставщику = ЗаказПоставщикуТовары.Ссылка
			И ЗаказыПоставщикамОстатки.КодСтроки = ЗаказПоставщикуТовары.КодСтроки

СГРУППИРОВАТЬ ПО
	ЗаказыПоставщикамОстатки.Номенклатура,
	НЕДЕЛЯ(ЗаказыПоставщикамОстатки.ЗаказПоставщику.ДатаПоступления)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Полуфабрикат,
	ОсновныеСпецификации.Спецификация КАК Спецификация,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	СУММА(ВЫБОР
			КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
				ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
			ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		КОНЕЦ) КАК Потребность,
	ЕСТЬNULL(втОстатки.НачальныйОстаток, 0) КАК НачальныйОстаток,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете
ПОМЕСТИТЬ втПолуфабрикаты
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
				ЛЕВОЕ СОЕДИНЕНИЕ втОстатки КАК втОстатки
				ПО (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = втОстатки.Номенклатура)
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
				ПО (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = ОсновныеСпецификации.Номенклатура)
			ПО (РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка)
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияПФ)
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификацииГП
			ПО (РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификацииГП.Спецификация)
		ПО (втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура)
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0

СГРУППИРОВАТЬ ПО
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура,
	втИзделияПФ.ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете,
	ЕСТЬNULL(втОстатки.НачальныйОстаток, 0),
	ОсновныеСпецификации.Спецификация
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Полуфабрикат,
	ОсновныеСпецификации.Спецификация КАК Спецификация,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	ВЫБОР
		КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
			ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
	КОНЕЦ КАК Потребность,
	ЕСТЬNULL(втОстатки.НачальныйОстаток, 0) КАК НачальныйОстаток,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	РесурсныеСпецификацииМатериалыИУслуги.Ссылка КАК Ссылка
ПОМЕСТИТЬ втПолуфабрикатыТЕСТ
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
				ЛЕВОЕ СОЕДИНЕНИЕ втОстатки КАК втОстатки
				ПО РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = втОстатки.Номенклатура
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
				ПО РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = ОсновныеСпецификации.Номенклатура
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияПФ)
			полное
			 СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификацииГП
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификацииГП.Спецификация
		ПО втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втПолуфабрикаты.Полуфабрикат КАК Полуфабрикат,
	втПолуфабрикаты.Спецификация КАК Спецификация,
	втПолуфабрикаты.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втПолуфабрикаты.НачальныйОстаток КАК НачальныйОстаток,
	втПолуфабрикаты.Потребность КАК Потребность,
	СУММА(втПолуфабрикатыНарастающийИтог.Потребность) КАК ПотребностьНарастающийИтог,
	1 + втПолуфабрикаты.НомерНеделиВОтчете КАК НомерНеделиВОтчетеСмещение,
	втПолуфабрикаты.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	ЕСТЬNULL(втЗаказыПФПоставщикам.ЗаказаноОстаток, 0) КАК ЗаказаноПоставщику
ПОМЕСТИТЬ втПолуфабриатыНарастающийИтог
ИЗ
	втПолуфабрикаты КАК втПолуфабрикаты
		ЛЕВОЕ СОЕДИНЕНИЕ втПолуфабрикаты КАК втПолуфабрикатыНарастающийИтог
		ПО втПолуфабрикаты.НомерНеделиВОтчете >= втПолуфабрикатыНарастающийИтог.НомерНеделиВОтчете
			И втПолуфабрикаты.Полуфабрикат = втПолуфабрикатыНарастающийИтог.Полуфабрикат
		ЛЕВОЕ СОЕДИНЕНИЕ втЗаказыПФПоставщикам КАК втЗаказыПФПоставщикам
		ПО втПолуфабрикаты.Полуфабрикат = втЗаказыПФПоставщикам.Номенклатура
			И втПолуфабрикаты.ДатаЗапускаВыпуска = втЗаказыПФПоставщикам.НеделяПланируемогоПоступления

СГРУППИРОВАТЬ ПО
	втПолуфабрикаты.ДатаЗапускаВыпуска,
	втПолуфабрикаты.Потребность,
	втПолуфабрикаты.НомерНеделиВОтчете,
	1 + втПолуфабрикаты.НомерНеделиВОтчете,
	ЕСТЬNULL(втЗаказыПФПоставщикам.ЗаказаноОстаток, 0),
	втПолуфабрикаты.Полуфабрикат,
	втПолуфабрикаты.Спецификация,
	втПолуфабрикаты.НачальныйОстаток

ДЛЯ ИЗМЕНЕНИЯ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втПолуфабриатыНарастающийИтог.Полуфабрикат КАК Полуфабрикат,
	втПолуфабриатыНарастающийИтог.Спецификация КАК Спецификация,
	втПолуфабриатыНарастающийИтог.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втПолуфабриатыНарастающийИтог.НачальныйОстаток КАК НачальныйОстаток,
	втПолуфабриатыНарастающийИтог.Потребность КАК Потребность,
	втПолуфабриатыНарастающийИтог.ПотребностьНарастающийИтог КАК ПотребностьНарастающийИтог,
	втПолуфабриатыНарастающийИтог.НомерНеделиВОтчетеСмещение КАК НомерНеделиВОтчетеСмещение,
	втПолуфабриатыНарастающийИтог.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	втПолуфабриатыНарастающийИтог.ЗаказаноПоставщику КАК ЗаказаноПоставщику,
	СУММА(втПолуфабриатыНарастающийИтогСмещение.ЗаказаноПоставщику) КАК ЗаказаноПоставщикуНарастающийИтог
ПОМЕСТИТЬ втПолуфабриатыНарастающийИтогЗаказыПост
ИЗ
	втПолуфабриатыНарастающийИтог КАК втПолуфабриатыНарастающийИтог
		ЛЕВОЕ СОЕДИНЕНИЕ втПолуфабриатыНарастающийИтог КАК втПолуфабриатыНарастающийИтогСмещение
		ПО втПолуфабриатыНарастающийИтог.Полуфабрикат = втПолуфабриатыНарастающийИтогСмещение.Полуфабрикат
			И втПолуфабриатыНарастающийИтог.НомерНеделиВОтчете >= втПолуфабриатыНарастающийИтогСмещение.НомерНеделиВОтчете

СГРУППИРОВАТЬ ПО
	втПолуфабриатыНарастающийИтог.Полуфабрикат,
	втПолуфабриатыНарастающийИтог.Спецификация,
	втПолуфабриатыНарастающийИтог.ДатаЗапускаВыпуска,
	втПолуфабриатыНарастающийИтог.НачальныйОстаток,
	втПолуфабриатыНарастающийИтог.Потребность,
	втПолуфабриатыНарастающийИтог.ПотребностьНарастающийИтог,
	втПолуфабриатыНарастающийИтог.НомерНеделиВОтчетеСмещение,
	втПолуфабриатыНарастающийИтог.НомерНеделиВОтчете,
	втПолуфабриатыНарастающийИтог.ЗаказаноПоставщику
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втПолуфабриатыНарастающийИтогЗаказыПост.Полуфабрикат КАК Полуфабрикат,
	втПолуфабриатыНарастающийИтогЗаказыПост.Спецификация КАК Спецификация,
	втПолуфабриатыНарастающийИтогЗаказыПост.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	ЕСТЬNULL(ВЫБОР
			КОГДА втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПостСмещение.ПотребностьНарастающийИтог < 0
				ТОГДА втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток
			ИНАЧЕ втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПостСмещение.ПотребностьНарастающийИтог
		КОНЕЦ, втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток) КАК НачальныйОстаток,
	втПолуфабриатыНарастающийИтогЗаказыПост.Потребность КАК Потребность,
	втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог КАК ПотребностьНарастающийИтог,
	ВЫБОР
		КОГДА втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог < 0
			ТОГДА 0
		ИНАЧЕ втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог
	КОНЕЦ КАК РасчетныйОстатокНаКонецПериода,
	ВЫБОР
		КОГДА втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток >= втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог
			ТОГДА 0
		ИНАЧЕ ВЫБОР
				КОГДА ЕСТЬNULL(ВЫБОР
							КОГДА втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПостСмещение.ПотребностьНарастающийИтог < 0
								ТОГДА 0
							ИНАЧЕ втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПостСмещение.ПотребностьНарастающийИтог
						КОНЕЦ, втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток) > 0
					ТОГДА втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог - втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток
				ИНАЧЕ втПолуфабриатыНарастающийИтогЗаказыПост.Потребность
			КОНЕЦ
	КОНЕЦ КАК КПроизводству,
	втПолуфабриатыНарастающийИтогЗаказыПост.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	втПолуфабриатыНарастающийИтогЗаказыПост.ЗаказаноПоставщику КАК ЗаказаноПоставщику,
	втПолуфабриатыНарастающийИтогЗаказыПост.ЗаказаноПоставщикуНарастающийИтог КАК ЗаказаноПоставщикуНарастающийИтог
ПОМЕСТИТЬ втПолуфабрикатыРезультат
ИЗ
	втПолуфабриатыНарастающийИтогЗаказыПост КАК втПолуфабриатыНарастающийИтогЗаказыПост
		ЛЕВОЕ СОЕДИНЕНИЕ втПолуфабриатыНарастающийИтогЗаказыПост КАК втПолуфабриатыНарастающийИтогЗаказыПостСмещение
		ПО втПолуфабриатыНарастающийИтогЗаказыПост.Полуфабрикат = втПолуфабриатыНарастающийИтогЗаказыПостСмещение.Полуфабрикат
			И (втПолуфабриатыНарастающийИтогЗаказыПост.НомерНеделиВОтчете = втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НомерНеделиВОтчете + 1)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втПолуфабрикатыРезультат.Полуфабрикат КАК Полуфабрикат,
	втПолуфабрикатыРезультат.Спецификация КАК Спецификация,
	втПолуфабрикатыРезультат.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втПолуфабрикатыРезультат.НачальныйОстаток КАК НачальныйОстаток,
	втПолуфабрикатыРезультат.Потребность КАК Потребность,
	ВЫБОР
		КОГДА втПолуфабрикатыРезультат.ПотребностьНарастающийИтог - ЕСТЬNULL(втПолуфабрикатыРезультат.ЗаказаноПоставщикуНарастающийИтог, 0) > 0
			ТОГДА втПолуфабрикатыРезультат.ПотребностьНарастающийИтог - ЕСТЬNULL(втПолуфабрикатыРезультат.ЗаказаноПоставщикуНарастающийИтог, 0)
		ИНАЧЕ 0
	КОНЕЦ КАК ПотребностьНарастающийИтог,
	втПолуфабрикатыРезультат.РасчетныйОстатокНаКонецПериода КАК РасчетныйОстатокНаКонецПериода,
	втПолуфабрикатыРезультат.КПроизводству КАК КПроизводству,
	втПолуфабрикатыРезультат.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	втПолуфабрикатыРезультат.ЗаказаноПоставщику КАК ЗаказаноПоставщику
ИЗ
	втПолуфабрикатыРезультат КАК втПолуфабрикатыРезультат
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Сырье,
	NULL КАК Спецификация,
	СУММА(ВЫБОР
			КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
				ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
			ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		КОНЕЦ) КАК Потребность,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияСырье)
			ПОЛНОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификации.Спецификация
		ПО втИзделияПФ.Спецификация = РесурсныеСпецификацииВыходныеИзделия.Ссылка
			И втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0

СГРУППИРОВАТЬ ПО
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура,
	втИзделияПФ.ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ втЗаказыПФПоставщикам
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ втИзделияПФ
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ втПолуфабриатыНарастающийИтог
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ втПолуфабриатыНарастающийИтогЗаказыПост
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ втПолуфабрикатыРезультат
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ втПолуфабрикаты"}
},
{
{"S","ИД"},
{"S","20200316104758"}
}
}
}
},
{
{"S","Результат"},
{"#",e603103e-a318-4edc-a014-b1c6cf94d49f,
{8,1,10,
{"#","",1,1,"#","Язык по умолчанию","Язык по умолчанию",0},
{128,72},
{1,1,
{4,0,
{0},1,1,7,f527dc88-1d39-40b3-bcbb-d98b690ead68,0},0},0,
{0,0},
{0,0},
{0,0},
{0,0},
{0,0},
{0,0},0,2,18,1,0,1,0,
{48,1,
{1,1,
{"#","втПолуфабрикатыТЕСТ (0.066 мс., строк: 4)"}
},
{1,1,
{"#","ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Полуфабрикат,
	ОсновныеСпецификации.Спецификация КАК Спецификация,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	ВЫБОР
		КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
			ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
	КОНЕЦ КАК Потребность,
	ЕСТЬNULL(втОстатки.НачальныйОстаток, 0) КАК НачальныйОстаток,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	РесурсныеСпецификацииМатериалыИУслуги.Ссылка КАК Ссылка
ПОМЕСТИТЬ втПолуфабрикатыТЕСТ
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
				ЛЕВОЕ СОЕДИНЕНИЕ втОстатки КАК втОстатки
				ПО РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = втОстатки.Номенклатура
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
				ПО РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = ОсновныеСпецификации.Номенклатура
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияПФ)
			полное
			 СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификацииГП
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификацииГП.Спецификация
		ПО втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0"}
},1,
{
{16,2,
{1,1,
{"#","ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Полуфабрикат,
	ОсновныеСпецификации.Спецификация КАК Спецификация,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	ВЫБОР
		КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
			ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
	КОНЕЦ КАК Потребность,
	ЕСТЬNULL(втОстатки.НачальныйОстаток, 0) КАК НачальныйОстаток,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	РесурсныеСпецификацииМатериалыИУслуги.Ссылка КАК Ссылка
ПОМЕСТИТЬ втПолуфабрикатыТЕСТ
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
				ЛЕВОЕ СОЕДИНЕНИЕ втОстатки КАК втОстатки
				ПО РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = втОстатки.Номенклатура
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
				ПО РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = ОсновныеСпецификации.Номенклатура
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияПФ)
			полное
			 СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификацииГП
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификацииГП.Спецификация
		ПО втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0"}
},0},6,1,1,20,-20,0,1,300,200,0,1},0},2,3,7,0,
{48,4,
{1,1,
{"#","Полуфабрикат"}
},
{1,1,
{"#","Номенклатура, Null"}
},1,
{
{16,2,
{1,1,
{"#","Номенклатура, Null"}
},0},6,1,1,20,-20,0,2,300,200,0,1},0},1,
{48,4,
{1,1,
{"#","Спецификация"}
},
{1,1,
{"#","Ресурсная спецификация, Null"}
},1,
{
{16,2,
{1,1,
{"#","Ресурсная спецификация, Null"}
},0},6,1,1,20,-20,1,2,300,200,0,1},0},2,
{48,4,
{1,1,
{"#","ДатаЗапускаВыпуска"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,2,2,300,200,0,1},0},3,
{48,4,
{1,1,
{"#","Потребность"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,3,2,300,200,0,1},0},4,
{48,4,
{1,1,
{"#","НачальныйОстаток"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,4,2,300,200,0,1},0},5,
{48,4,
{1,1,
{"#","НомерНеделиВОтчете"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,5,2,300,200,0,1},0},6,
{48,4,
{1,1,
{"#","Ссылка"}
},
{1,1,
{"#","Ресурсная спецификация, Null"}
},1,
{
{16,2,
{1,1,
{"#","Ресурсная спецификация, Null"}
},0},6,1,1,20,-20,6,2,300,200,0,1},0},3,3,7,0,
{20,5,
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06,253:ac0ce61f135b973f11e69ce25261987f},
{1,1,
{"#","Кабель ШВВП 2х0,5"}
},0},1,
{20,6,
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5,410:b195e61f135b973f11e977e60d8ac2f8},
{1,1,
{"#","Кабель ШВВП 2х0,5"}
},0},2,
{20,7,
{"N",13},
{1,1,
{"#","13"}
},0},3,
{20,7,
{"N",60000},
{1,1,
{"#","60 000"}
},0},4,
{20,7,
{"N",60930},
{1,1,
{"#","60 930"}
},0},5,
{20,7,
{"N",1},
{1,1,
{"#","1"}
},0},6,
{20,6,
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5,410:84b5e61f135b973f11ea49711057aa4f},
{1,1,
{"#","Шнур питания ШВВП 2х0,5 3м 6А (Р)"}
},0},4,3,7,0,
{20,5,
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06,253:ac0ce61f135b973f11e69ce25261987f},
{1,1,
{"#","Кабель ШВВП 2х0,5"}
},0},1,
{20,6,
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5,410:b195e61f135b973f11e977e60d8ac2f8},
{1,1,
{"#","Кабель ШВВП 2х0,5"}
},0},2,
{20,7,
{"N",13},
{1,1,
{"#","13"}
},0},3,
{20,7,
{"N",60000},
{1,1,
{"#","60 000"}
},0},4,
{20,7,
{"N",60930},
{1,1,
{"#","60 930"}
},0},5,
{20,7,
{"N",1},
{1,1,
{"#","1"}
},0},6,
{20,6,
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5,410:b272e61f135b973f11e7394c0b4964d5},
{1,1,
{"#","Шнур питания ШВВП 2х0,5 3м 6А"}
},0},5,3,7,0,
{20,5,
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06,253:ac0ce61f135b973f11e69ce25261987f},
{1,1,
{"#","Кабель ШВВП 2х0,5"}
},0},1,
{20,6,
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5,410:b195e61f135b973f11e977e60d8ac2f8},
{1,1,
{"#","Кабель ШВВП 2х0,5"}
},0},2,
{20,7,
{"N",14},
{1,1,
{"#","14"}
},0},3,
{20,7,
{"N",60000},
{1,1,
{"#","60 000"}
},0},4,
{20,7,
{"N",60930},
{1,1,
{"#","60 930"}
},0},5,
{20,7,
{"N",2},
{1,1,
{"#","2"}
},0},6,
{20,6,
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5,410:84b5e61f135b973f11ea49711057aa4f},
{1,1,
{"#","Шнур питания ШВВП 2х0,5 3м 6А (Р)"}
},0},6,3,7,0,
{20,5,
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06,253:ac0ce61f135b973f11e69ce25261987f},
{1,1,
{"#","Кабель ШВВП 2х0,5"}
},0},1,
{20,6,
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5,410:b195e61f135b973f11e977e60d8ac2f8},
{1,1,
{"#","Кабель ШВВП 2х0,5"}
},0},2,
{20,7,
{"N",14},
{1,1,
{"#","14"}
},0},3,
{20,7,
{"N",60000},
{1,1,
{"#","60 000"}
},0},4,
{20,7,
{"N",60930},
{1,1,
{"#","60 930"}
},0},5,
{20,7,
{"N",2},
{1,1,
{"#","2"}
},0},6,
{20,6,
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5,410:b272e61f135b973f11e7394c0b4964d5},
{1,1,
{"#","Шнур питания ШВВП 2х0,5 3м 6А"}
},0},8,0,1,0,
{48,1,
{1,1,
{"#","Результат1 (0.001 мс., строк: 2)"}
},
{1,1,
{"#","ВЫБРАТЬ
	втПолуфабрикатыРезультат.Полуфабрикат КАК Полуфабрикат,
	втПолуфабрикатыРезультат.Спецификация КАК Спецификация,
	втПолуфабрикатыРезультат.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втПолуфабрикатыРезультат.НачальныйОстаток КАК НачальныйОстаток,
	втПолуфабрикатыРезультат.Потребность КАК Потребность,
	ВЫБОР
		КОГДА втПолуфабрикатыРезультат.ПотребностьНарастающийИтог - ЕСТЬNULL(втПолуфабрикатыРезультат.ЗаказаноПоставщикуНарастающийИтог, 0) > 0
			ТОГДА втПолуфабрикатыРезультат.ПотребностьНарастающийИтог - ЕСТЬNULL(втПолуфабрикатыРезультат.ЗаказаноПоставщикуНарастающийИтог, 0)
		ИНАЧЕ 0
	КОНЕЦ КАК ПотребностьНарастающийИтог,
	втПолуфабрикатыРезультат.РасчетныйОстатокНаКонецПериода КАК РасчетныйОстатокНаКонецПериода,
	втПолуфабрикатыРезультат.КПроизводству КАК КПроизводству,
	втПолуфабрикатыРезультат.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	втПолуфабрикатыРезультат.ЗаказаноПоставщику КАК ЗаказаноПоставщику
ИЗ
	втПолуфабрикатыРезультат КАК втПолуфабрикатыРезультат"}
},1,
{
{16,2,
{1,1,
{"#","ВЫБРАТЬ
	втПолуфабрикатыРезультат.Полуфабрикат КАК Полуфабрикат,
	втПолуфабрикатыРезультат.Спецификация КАК Спецификация,
	втПолуфабрикатыРезультат.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втПолуфабрикатыРезультат.НачальныйОстаток КАК НачальныйОстаток,
	втПолуфабрикатыРезультат.Потребность КАК Потребность,
	ВЫБОР
		КОГДА втПолуфабрикатыРезультат.ПотребностьНарастающийИтог - ЕСТЬNULL(втПолуфабрикатыРезультат.ЗаказаноПоставщикуНарастающийИтог, 0) > 0
			ТОГДА втПолуфабрикатыРезультат.ПотребностьНарастающийИтог - ЕСТЬNULL(втПолуфабрикатыРезультат.ЗаказаноПоставщикуНарастающийИтог, 0)
		ИНАЧЕ 0
	КОНЕЦ КАК ПотребностьНарастающийИтог,
	втПолуфабрикатыРезультат.РасчетныйОстатокНаКонецПериода КАК РасчетныйОстатокНаКонецПериода,
	втПолуфабрикатыРезультат.КПроизводству КАК КПроизводству,
	втПолуфабрикатыРезультат.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	втПолуфабрикатыРезультат.ЗаказаноПоставщику КАК ЗаказаноПоставщику
ИЗ
	втПолуфабрикатыРезультат КАК втПолуфабрикатыРезультат"}
},0},6,1,1,20,-20,0,8,300,200,0,1},0},9,3,10,0,
{48,4,
{1,1,
{"#","Полуфабрикат"}
},
{1,1,
{"#","Номенклатура, Null"}
},1,
{
{16,2,
{1,1,
{"#","Номенклатура, Null"}
},0},6,1,1,20,-20,0,9,300,200,0,1},0},1,
{48,4,
{1,1,
{"#","Спецификация"}
},
{1,1,
{"#","Ресурсная спецификация, Null"}
},1,
{
{16,2,
{1,1,
{"#","Ресурсная спецификация, Null"}
},0},6,1,1,20,-20,1,9,300,200,0,1},0},2,
{48,4,
{1,1,
{"#","ДатаЗапускаВыпуска"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,2,9,300,200,0,1},0},3,
{48,4,
{1,1,
{"#","НачальныйОстаток"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,3,9,300,200,0,1},0},4,
{48,4,
{1,1,
{"#","Потребность"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,4,9,300,200,0,1},0},5,
{48,4,
{1,1,
{"#","ПотребностьНарастающийИтог"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,5,9,300,200,0,1},0},6,
{48,4,
{1,1,
{"#","РасчетныйОстатокНаКонецПериода"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,6,9,300,200,0,1},0},7,
{48,4,
{1,1,
{"#","КПроизводству"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,7,9,300,200,0,1},0},8,
{48,4,
{1,1,
{"#","НомерНеделиВОтчете"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,8,9,300,200,0,1},0},9,
{48,4,
{1,1,
{"#","ЗаказаноПоставщику"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,9,9,300,200,0,1},0},10,3,10,0,
{20,5,
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06,253:ac0ce61f135b973f11e69ce25261987f},
{1,1,
{"#","Кабель ШВВП 2х0,5"}
},0},1,
{20,6,
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5,410:b195e61f135b973f11e977e60d8ac2f8},
{1,1,
{"#","Кабель ШВВП 2х0,5"}
},0},2,
{20,7,
{"N",13},
{1,1,
{"#","13"}
},0},3,
{20,7,
{"N",60930},
{1,1,
{"#","60 930"}
},0},4,
{20,7,
{"N",60000},
{1,1,
{"#","60 000"}
},0},5,
{20,7,
{"N",60000},
{1,1,
{"#","60 000"}
},0},6,
{20,7,
{"N",930},
{1,1,
{"#","930"}
},0},7,
{20,8,
{"N",0},
{1,1,
{"#","<0>"}
},0},8,
{20,7,
{"N",1},
{1,1,
{"#","1"}
},0},9,
{20,8,
{"N",0},
{1,1,
{"#","<0>"}
},0},11,3,10,0,
{20,5,
{"#",190a7469-3325-4d33-b5ec-28a63ac83b06,253:ac0ce61f135b973f11e69ce25261987f},
{1,1,
{"#","Кабель ШВВП 2х0,5"}
},0},1,
{20,6,
{"#",53f9c07a-3773-4723-b0a5-fafab5733ae5,410:b195e61f135b973f11e977e60d8ac2f8},
{1,1,
{"#","Кабель ШВВП 2х0,5"}
},0},2,
{20,7,
{"N",14},
{1,1,
{"#","14"}
},0},3,
{20,7,
{"N",930},
{1,1,
{"#","930"}
},0},4,
{20,7,
{"N",60000},
{1,1,
{"#","60 000"}
},0},5,
{20,7,
{"N",120000},
{1,1,
{"#","120 000"}
},0},6,
{20,8,
{"N",0},
{1,1,
{"#","<0>"}
},0},7,
{20,7,
{"N",59070},
{1,1,
{"#","59 070"}
},0},8,
{20,7,
{"N",2},
{1,1,
{"#","2"}
},0},9,
{20,8,
{"N",0},
{1,1,
{"#","<0>"}
},0},13,0,1,0,
{48,1,
{1,1,
{"#","Результат2 (0.003 мс., строк: 0)"}
},
{1,1,
{"#","ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Сырье,
	NULL КАК Спецификация,
	СУММА(ВЫБОР
			КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
				ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
			ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		КОНЕЦ) КАК Потребность,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияСырье)
			ПОЛНОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификации.Спецификация
		ПО втИзделияПФ.Спецификация = РесурсныеСпецификацииВыходныеИзделия.Ссылка
			И втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0

СГРУППИРОВАТЬ ПО
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура,
	втИзделияПФ.ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете"}
},1,
{
{16,2,
{1,1,
{"#","ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Сырье,
	NULL КАК Спецификация,
	СУММА(ВЫБОР
			КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
				ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
			ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		КОНЕЦ) КАК Потребность,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияСырье)
			ПОЛНОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификации.Спецификация
		ПО втИзделияПФ.Спецификация = РесурсныеСпецификацииВыходныеИзделия.Ссылка
			И втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0

СГРУППИРОВАТЬ ПО
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура,
	втИзделияПФ.ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете"}
},0},6,1,1,20,-20,0,13,300,200,0,1},0},14,3,5,0,
{48,4,
{1,1,
{"#","Сырье"}
},
{1,1,
{"#","Номенклатура, Null"}
},1,
{
{16,2,
{1,1,
{"#","Номенклатура, Null"}
},0},6,1,1,20,-20,0,14,300,200,0,1},0},1,
{48,4,
{1,1,
{"#","Спецификация"}
},
{1,1,
{"#","Null"}
},1,
{
{16,2,
{1,1,
{"#","Null"}
},0},6,1,1,20,-20,1,14,300,200,0,1},0},2,
{48,4,
{1,1,
{"#","Потребность"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,2,14,300,200,0,1},0},3,
{48,4,
{1,1,
{"#","ДатаЗапускаВыпуска"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,3,14,300,200,0,1},0},4,
{48,4,
{1,1,
{"#","НомерНеделиВОтчете"}
},
{1,1,
{"#","Null, Число"}
},1,
{
{16,2,
{1,1,
{"#","Null, Число"}
},0},6,1,1,20,-20,4,14,300,200,0,1},0},17,0,1,0,
{16,9,
{1,1,
{"#","УНИЧТОЖИТЬ втЗаказыПФПоставщикам (0.001 мс.)"}
},0},19,0,1,0,
{16,9,
{1,1,
{"#","УНИЧТОЖИТЬ втИзделияПФ (0 мс.)"}
},0},21,0,1,0,
{16,9,
{1,1,
{"#","УНИЧТОЖИТЬ втПолуфабриатыНарастающийИтог (0 мс.)"}
},0},23,0,1,0,
{16,9,
{1,1,
{"#","УНИЧТОЖИТЬ втПолуфабриатыНарастающийИтогЗаказыПост (0.001 мс.)"}
},0},25,0,1,0,
{16,9,
{1,1,
{"#","УНИЧТОЖИТЬ втПолуфабрикатыРезультат (0 мс.)"}
},0},27,0,1,0,
{16,9,
{1,1,
{"#","УНИЧТОЖИТЬ втПолуфабрикаты (0 мс.)"}
},0},
{10,0,00000000-0000-0000-0000-000000000000,0},28,3,
{7,0,d6933520-1dc2-41f9-ba99-93b7da469532,7,0,10,1,10,2,11,3,12,4,12,5,11,6,13},
{10,0,f532bb3e-e322-4dc2-8487-e786705cf748,10,0,10,1,10,2,11,3,12,4,12,5,14,6,11,7,12,8,11,9,11},
{5,0,f32d4933-d193-4d4a-bcbc-53208b26d82c,5,0,11,1,11,2,11,3,11,4,11},9,2,0,3,0,4,0,5,0,6,0,9,1,10,1,11,1,14,2,0,0,3,
{3,6,0,
{1,0},0,0},0,
{10,11,0,
{1,0},0,0},1,
{14,15,0,
{1,0},0,0},-1,0,0,0,
{0},
{0},
{0},
{0},"",
{
{0,6,6,
{"N",1000},7,
{"N",1000},8,
{"N",1000},9,
{"N",1000},10,
{"N",1000},11,
{"N",1000}
}
},
{0,-1,-1,-1,-1,00000000-0000-0000-0000-000000000000},0,0,0,0,0,0,0,1,0,1,14,
{1,0},
{3584,0,2,3},
{8589934592,1},
{8589936702,0,0,0,0,4,5,1},
{10737419326,0,0,0,0,4,6,0,1},
{8589935678,0,0,0,0,4,6,1},
{8589935934,0,0,0,0,4,2,7,1},
{8589935678,0,0,0,0,4,8,1},
{1025,1,9},
{128,136},
{128,40},
{128,48},
{128,264},
{128,56},2,
{7,1,516,
{0},700,1,100},
{7,1,524,
{0},700,1,1,100},0,0,0,10,
{3,3,
{-1}
},
{3,3,
{-3}
},
{3,3,
{-24}
},
{3,3,
{-23}
},
{3,0,
{8765644}
},
{3,0,
{12971252}
},
{3,2,
{8}
},
{3,2,
{29}
},
{3,2,
{52}
},
{3,2,
{119}
},0,0,0,"",0,
{3,0,0,100,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,"",0,0,0,0,0,0,0},
{2,4,
{3,3,
{-28}
},5,
{3,3,
{-25}
}
},0,0,0,1,0}
}
},
{
{"S","СтруктураТЗ"},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{0}
}
},
{
{"S","СтруктураРезультатовЗапросов"},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{0}
}
},
{
{"S","СтруктурыРезультатовЗапросовТабДоков"},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{1,
{
{"S","Результат1"},
{"#",4238019d-7e49-4fc9-91db-b6b951d5cf8e,
{0}
}
}
}
}
},
{
{"S","УникальныйИдентификаторФормы"},
{"#",fc01b5df-97fe-449b-83d4-218a090e681e,4fd664d1-e1bf-404c-b739-191ab5b6c362}
},
{
{"S","ДеревоЗапросов"},
{"#",e603c0f2-92fb-4d47-8f38-a44a381cf235,
{1,
{7,
{1,"Наименование",
{"Pattern",
{"S"}
},"",0},
{2,"ИД",
{"Pattern",
{"S",14,1}
},"",0},
{3,"Текст",
{"Pattern",
{"S"}
},"",0},
{4,"АвтоДобавлениеПредставлений",
{"Pattern",
{"B"}
},"",0},
{5,"РежимКомпоновкиДанных",
{"Pattern",
{"B"}
},"",0},
{6,"ИДКартинки",
{"Pattern",
{"N",10,0,0}
},"",0},
{8,"ВыполнитьВГруппе",
{"Pattern",
{"N"}
},"",0}
},
{2,7,0,1,1,2,2,3,3,4,4,5,5,6,6,8,
{1,1,
{2,0,7,
{"S","Запрос"},
{"S","20200316104758"},
{"S","ВЫБРАТЬ
	ТоварыНаСкладахОстатки.Номенклатура КАК Номенклатура,
	СУММА(ТоварыНаСкладахОстатки.ВНаличииОстаток) КАК НачальныйОстаток
ПОМЕСТИТЬ втОстатки
ИЗ
	РегистрНакопления.ТоварыНаСкладах.Остатки(&ДатаОстатков, Склад В (&СкладНарва, &СкладСырьяИГП)) КАК ТоварыНаСкладахОстатки

СГРУППИРОВАТЬ ПО
	ТоварыНаСкладахОстатки.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТабПФ.Полуфабрикат КАК Номенклатура,
	ТабПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	ТабПФ.Спецификация КАК Спецификация,
	ТабПФ.КПроизводству КАК КоличествоОборот,
	ТабПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска
ПОМЕСТИТЬ втИзделияПФ
ИЗ
	&ТабПФ КАК ТабПФ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЗаказыПоставщикамОстатки.Номенклатура КАК Номенклатура,
	СУММА(ВЫБОР
			КОГДА ЗаказыПоставщикамОстатки.ЗаказПоставщику.ДатаПоступления < &ДатаНачалаПланирование
				ТОГДА 0
			ИНАЧЕ ЗаказыПоставщикамОстатки.ЗаказаноОстаток
		КОНЕЦ) КАК ЗаказаноОстаток,
	СУММА(ВЫБОР
			КОГДА ЗаказыПоставщикамОстатки.ЗаказПоставщику.ДатаПоступления < &ДатаНачалаПланирование
				ТОГДА ЗаказыПоставщикамОстатки.ЗаказаноОстаток
			ИНАЧЕ 0
		КОНЕЦ) КАК ЗаказаноОстатокПросрочка,
	НЕДЕЛЯ(ЗаказыПоставщикамОстатки.ЗаказПоставщику.ДатаПоступления) КАК НеделяПланируемогоПоступления
ПОМЕСТИТЬ втЗаказыПФПоставщикам
ИЗ
	РегистрНакопления.ЗаказыПоставщикам.Остатки(, Склад В (&СкладНарва, &СкладСырьяИГП)) КАК ЗаказыПоставщикамОстатки
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.ЗаказПоставщику.Товары КАК ЗаказПоставщикуТовары
		ПО ЗаказыПоставщикамОстатки.ЗаказПоставщику = ЗаказПоставщикуТовары.Ссылка
			И ЗаказыПоставщикамОстатки.КодСтроки = ЗаказПоставщикуТовары.КодСтроки

СГРУППИРОВАТЬ ПО
	ЗаказыПоставщикамОстатки.Номенклатура,
	НЕДЕЛЯ(ЗаказыПоставщикамОстатки.ЗаказПоставщику.ДатаПоступления)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Полуфабрикат,
	ОсновныеСпецификации.Спецификация КАК Спецификация,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	СУММА(ВЫБОР
			КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
				ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
			ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		КОНЕЦ) КАК Потребность,
	ЕСТЬNULL(втОстатки.НачальныйОстаток, 0) КАК НачальныйОстаток,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете
ПОМЕСТИТЬ втПолуфабрикаты
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
				ЛЕВОЕ СОЕДИНЕНИЕ втОстатки КАК втОстатки
				ПО (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = втОстатки.Номенклатура)
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
				ПО (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = ОсновныеСпецификации.Номенклатура)
			ПО (РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка)
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияПФ)
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификацииГП
			ПО (РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификацииГП.Спецификация)
		ПО (втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура)
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0

СГРУППИРОВАТЬ ПО
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура,
	втИзделияПФ.ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете,
	ЕСТЬNULL(втОстатки.НачальныйОстаток, 0),
	ОсновныеСпецификации.Спецификация
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Полуфабрикат,
	ОсновныеСпецификации.Спецификация КАК Спецификация,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	ВЫБОР
		КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
			ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
	КОНЕЦ КАК Потребность,
	ЕСТЬNULL(втОстатки.НачальныйОстаток, 0) КАК НачальныйОстаток,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	РесурсныеСпецификацииМатериалыИУслуги.Ссылка КАК Ссылка
ПОМЕСТИТЬ втПолуфабрикатыТЕСТ
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
				ЛЕВОЕ СОЕДИНЕНИЕ втОстатки КАК втОстатки
				ПО РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = втОстатки.Номенклатура
				ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
				ПО РесурсныеСпецификацииМатериалыИУслуги.Номенклатура = ОсновныеСпецификации.Номенклатура
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияПФ)
			полное
			 СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификацииГП
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификацииГП.Спецификация
		ПО втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втПолуфабрикаты.Полуфабрикат КАК Полуфабрикат,
	втПолуфабрикаты.Спецификация КАК Спецификация,
	втПолуфабрикаты.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втПолуфабрикаты.НачальныйОстаток КАК НачальныйОстаток,
	втПолуфабрикаты.Потребность КАК Потребность,
	СУММА(втПолуфабрикатыНарастающийИтог.Потребность) КАК ПотребностьНарастающийИтог,
	1 + втПолуфабрикаты.НомерНеделиВОтчете КАК НомерНеделиВОтчетеСмещение,
	втПолуфабрикаты.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	ЕСТЬNULL(втЗаказыПФПоставщикам.ЗаказаноОстаток, 0) КАК ЗаказаноПоставщику
ПОМЕСТИТЬ втПолуфабриатыНарастающийИтог
ИЗ
	втПолуфабрикаты КАК втПолуфабрикаты
		ЛЕВОЕ СОЕДИНЕНИЕ втПолуфабрикаты КАК втПолуфабрикатыНарастающийИтог
		ПО втПолуфабрикаты.НомерНеделиВОтчете >= втПолуфабрикатыНарастающийИтог.НомерНеделиВОтчете
			И втПолуфабрикаты.Полуфабрикат = втПолуфабрикатыНарастающийИтог.Полуфабрикат
		ЛЕВОЕ СОЕДИНЕНИЕ втЗаказыПФПоставщикам КАК втЗаказыПФПоставщикам
		ПО втПолуфабрикаты.Полуфабрикат = втЗаказыПФПоставщикам.Номенклатура
			И втПолуфабрикаты.ДатаЗапускаВыпуска = втЗаказыПФПоставщикам.НеделяПланируемогоПоступления

СГРУППИРОВАТЬ ПО
	втПолуфабрикаты.ДатаЗапускаВыпуска,
	втПолуфабрикаты.Потребность,
	втПолуфабрикаты.НомерНеделиВОтчете,
	1 + втПолуфабрикаты.НомерНеделиВОтчете,
	ЕСТЬNULL(втЗаказыПФПоставщикам.ЗаказаноОстаток, 0),
	втПолуфабрикаты.Полуфабрикат,
	втПолуфабрикаты.Спецификация,
	втПолуфабрикаты.НачальныйОстаток

ДЛЯ ИЗМЕНЕНИЯ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втПолуфабриатыНарастающийИтог.Полуфабрикат КАК Полуфабрикат,
	втПолуфабриатыНарастающийИтог.Спецификация КАК Спецификация,
	втПолуфабриатыНарастающийИтог.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втПолуфабриатыНарастающийИтог.НачальныйОстаток КАК НачальныйОстаток,
	втПолуфабриатыНарастающийИтог.Потребность КАК Потребность,
	втПолуфабриатыНарастающийИтог.ПотребностьНарастающийИтог КАК ПотребностьНарастающийИтог,
	втПолуфабриатыНарастающийИтог.НомерНеделиВОтчетеСмещение КАК НомерНеделиВОтчетеСмещение,
	втПолуфабриатыНарастающийИтог.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	втПолуфабриатыНарастающийИтог.ЗаказаноПоставщику КАК ЗаказаноПоставщику,
	СУММА(втПолуфабриатыНарастающийИтогСмещение.ЗаказаноПоставщику) КАК ЗаказаноПоставщикуНарастающийИтог
ПОМЕСТИТЬ втПолуфабриатыНарастающийИтогЗаказыПост
ИЗ
	втПолуфабриатыНарастающийИтог КАК втПолуфабриатыНарастающийИтог
		ЛЕВОЕ СОЕДИНЕНИЕ втПолуфабриатыНарастающийИтог КАК втПолуфабриатыНарастающийИтогСмещение
		ПО втПолуфабриатыНарастающийИтог.Полуфабрикат = втПолуфабриатыНарастающийИтогСмещение.Полуфабрикат
			И втПолуфабриатыНарастающийИтог.НомерНеделиВОтчете >= втПолуфабриатыНарастающийИтогСмещение.НомерНеделиВОтчете

СГРУППИРОВАТЬ ПО
	втПолуфабриатыНарастающийИтог.Полуфабрикат,
	втПолуфабриатыНарастающийИтог.Спецификация,
	втПолуфабриатыНарастающийИтог.ДатаЗапускаВыпуска,
	втПолуфабриатыНарастающийИтог.НачальныйОстаток,
	втПолуфабриатыНарастающийИтог.Потребность,
	втПолуфабриатыНарастающийИтог.ПотребностьНарастающийИтог,
	втПолуфабриатыНарастающийИтог.НомерНеделиВОтчетеСмещение,
	втПолуфабриатыНарастающийИтог.НомерНеделиВОтчете,
	втПолуфабриатыНарастающийИтог.ЗаказаноПоставщику
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втПолуфабриатыНарастающийИтогЗаказыПост.Полуфабрикат КАК Полуфабрикат,
	втПолуфабриатыНарастающийИтогЗаказыПост.Спецификация КАК Спецификация,
	втПолуфабриатыНарастающийИтогЗаказыПост.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	ЕСТЬNULL(ВЫБОР
			КОГДА втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПостСмещение.ПотребностьНарастающийИтог < 0
				ТОГДА втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток
			ИНАЧЕ втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПостСмещение.ПотребностьНарастающийИтог
		КОНЕЦ, втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток) КАК НачальныйОстаток,
	втПолуфабриатыНарастающийИтогЗаказыПост.Потребность КАК Потребность,
	втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог КАК ПотребностьНарастающийИтог,
	ВЫБОР
		КОГДА втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог < 0
			ТОГДА 0
		ИНАЧЕ втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог
	КОНЕЦ КАК РасчетныйОстатокНаКонецПериода,
	ВЫБОР
		КОГДА втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток >= втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог
			ТОГДА 0
		ИНАЧЕ ВЫБОР
				КОГДА ЕСТЬNULL(ВЫБОР
							КОГДА втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПостСмещение.ПотребностьНарастающийИтог < 0
								ТОГДА 0
							ИНАЧЕ втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НачальныйОстаток - втПолуфабриатыНарастающийИтогЗаказыПостСмещение.ПотребностьНарастающийИтог
						КОНЕЦ, втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток) > 0
					ТОГДА втПолуфабриатыНарастающийИтогЗаказыПост.ПотребностьНарастающийИтог - втПолуфабриатыНарастающийИтогЗаказыПост.НачальныйОстаток
				ИНАЧЕ втПолуфабриатыНарастающийИтогЗаказыПост.Потребность
			КОНЕЦ
	КОНЕЦ КАК КПроизводству,
	втПолуфабриатыНарастающийИтогЗаказыПост.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	втПолуфабриатыНарастающийИтогЗаказыПост.ЗаказаноПоставщику КАК ЗаказаноПоставщику,
	втПолуфабриатыНарастающийИтогЗаказыПост.ЗаказаноПоставщикуНарастающийИтог КАК ЗаказаноПоставщикуНарастающийИтог
ПОМЕСТИТЬ втПолуфабрикатыРезультат
ИЗ
	втПолуфабриатыНарастающийИтогЗаказыПост КАК втПолуфабриатыНарастающийИтогЗаказыПост
		ЛЕВОЕ СОЕДИНЕНИЕ втПолуфабриатыНарастающийИтогЗаказыПост КАК втПолуфабриатыНарастающийИтогЗаказыПостСмещение
		ПО втПолуфабриатыНарастающийИтогЗаказыПост.Полуфабрикат = втПолуфабриатыНарастающийИтогЗаказыПостСмещение.Полуфабрикат
			И (втПолуфабриатыНарастающийИтогЗаказыПост.НомерНеделиВОтчете = втПолуфабриатыНарастающийИтогЗаказыПостСмещение.НомерНеделиВОтчете + 1)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	втПолуфабрикатыРезультат.Полуфабрикат КАК Полуфабрикат,
	втПолуфабрикатыРезультат.Спецификация КАК Спецификация,
	втПолуфабрикатыРезультат.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втПолуфабрикатыРезультат.НачальныйОстаток КАК НачальныйОстаток,
	втПолуфабрикатыРезультат.Потребность КАК Потребность,
	ВЫБОР
		КОГДА втПолуфабрикатыРезультат.ПотребностьНарастающийИтог - ЕСТЬNULL(втПолуфабрикатыРезультат.ЗаказаноПоставщикуНарастающийИтог, 0) > 0
			ТОГДА втПолуфабрикатыРезультат.ПотребностьНарастающийИтог - ЕСТЬNULL(втПолуфабрикатыРезультат.ЗаказаноПоставщикуНарастающийИтог, 0)
		ИНАЧЕ 0
	КОНЕЦ КАК ПотребностьНарастающийИтог,
	втПолуфабрикатыРезультат.РасчетныйОстатокНаКонецПериода КАК РасчетныйОстатокНаКонецПериода,
	втПолуфабрикатыРезультат.КПроизводству КАК КПроизводству,
	втПолуфабрикатыРезультат.НомерНеделиВОтчете КАК НомерНеделиВОтчете,
	втПолуфабрикатыРезультат.ЗаказаноПоставщику КАК ЗаказаноПоставщику
ИЗ
	втПолуфабрикатыРезультат КАК втПолуфабрикатыРезультат
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура КАК Сырье,
	NULL КАК Спецификация,
	СУММА(ВЫБОР
			КОГДА РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости = 0
				ТОГДА втИзделияПФ.КоличествоОборот * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
			ИНАЧЕ втИзделияПФ.КоличествоОборот * (РесурсныеСпецификацииВыходныеИзделия.ДоляСтоимости / 100) * (1 / РесурсныеСпецификацииВыходныеИзделия.Количество) * РесурсныеСпецификацииМатериалыИУслуги.Количество
		КОНЕЦ) КАК Потребность,
	втИзделияПФ.ДатаЗапускаВыпуска КАК ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете КАК НомерНеделиВОтчете
ИЗ
	втИзделияПФ КАК втИзделияПФ
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.ВыходныеИзделия КАК РесурсныеСпецификацииВыходныеИзделия
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.РесурсныеСпецификации.МатериалыИУслуги КАК РесурсныеСпецификацииМатериалыИУслуги
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = РесурсныеСпецификацииМатериалыИУслуги.Ссылка
				И (РесурсныеСпецификацииМатериалыИУслуги.Номенклатура.СхемаОбеспечения = &СхемаОбеспеченияСырье)
			ПОЛНОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновныеСпецификации КАК ОсновныеСпецификации
			ПО РесурсныеСпецификацииВыходныеИзделия.Ссылка = ОсновныеСпецификации.Спецификация
		ПО втИзделияПФ.Спецификация = РесурсныеСпецификацииВыходныеИзделия.Ссылка
			И втИзделияПФ.Номенклатура = РесурсныеСпецификацииВыходныеИзделия.Номенклатура
			И (РесурсныеСпецификацииВыходныеИзделия.Ссылка.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСпецификаций.Действует))
ГДЕ
	ЕСТЬNULL(РесурсныеСпецификацииМатериалыИУслуги.Номенклатура, 0) <> 0

СГРУППИРОВАТЬ ПО
	РесурсныеСпецификацииМатериалыИУслуги.Номенклатура,
	втИзделияПФ.ДатаЗапускаВыпуска,
	втИзделияПФ.НомерНеделиВОтчете
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ втЗаказыПФПоставщикам
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ втИзделияПФ
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ втПолуфабриатыНарастающийИтог
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ втПолуфабриатыНарастающийИтогЗаказыПост
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ втПолуфабрикатыРезультат
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ втПолуфабрикаты"},
{"B",0},
{"B",0},
{"N",0},
{"N",0},0}
},-1,0}
}
}
}
}
}